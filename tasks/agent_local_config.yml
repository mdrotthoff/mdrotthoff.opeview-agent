---
# $Author$
# $Date$
# $Source$

# agent_local_config tasks file for opsview-agent
- name: Create directory for local config files
  file:
    state: directory
    owner: "{{opsview_agent_user}}"
    group: "{{opsview_agent_group}}"
    mode:  0755
    path:  "{{opsview_agent_cfg_local}}"

- name: Create directory for local plug-in files
  file:
    state: directory
    owner: "{{opsview_agent_user}}"
    group: "{{opsview_agent_group}}"
    mode:  0755
    path:  "{{opsview_agent_plugin_local}}"

- name: Ensure the local config files are included
  lineinfile:
    dest:  "{{opsview_agent_cfg_file}}"
    line:  "include_dir={{opsview_agent_cfg_local}}"
    state: present
  notify:  Restart OpsView agent
